/* =======================
   GLOBAL (Angular app)
   ======================= */

/* 1) Variables */
:root {
  --bg: #0f1014;
  --paper: #f4f5f7;
  --ink: #101114;
  --ink-muted: #3b3f46;
  --border: #0e0f12;
  --shadow: 0 14px 36px rgba(0, 0, 0, 0.28);

  --accent: #ef4444;
  --accent-contrast: #0b0d10;

  --stamp: #ff6b6b;

  --fs-xxs: clamp(0.75rem, 0.65rem + 0.3vw, 0.85rem);
  --fs-xs: clamp(0.85rem, 0.75rem + 0.3vw, 0.95rem);
  --fs-sm: clamp(0.95rem, 0.8rem + 0.5vw, 1.05rem);
  --fs-md: clamp(1.08rem, 0.9rem + 0.7vw, 1.25rem);
  --fs-lg: clamp(1.35rem, 1.1rem + 1.2vw, 1.85rem);

  --r-xs: 8px;
  --r-sm: 12px;
  --r-md: 14px;
  --pad-card: 14px 16px;
  --gap: 10px;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);

  --glass-blur: 8px;
  --focus: #3b82f6;
  --glow: 0 0 0 3px rgba(59, 130, 246, 0.25);

  --grid-color: rgba(255, 255, 255, 0.08);
  --grid-size: 28px;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0c10;
    --paper: rgba(18, 19, 24, 0.75);
    --ink: #e7e9ee;
    --ink-muted: #b6bac2;
    --border: #e9eaee;
    --shadow: 0 14px 36px rgba(0, 0, 0, 0.55);

    --accent: #22d3ee;
    --accent-contrast: #0b0d10;

    --grid-color: rgba(255, 255, 255, 0.06);
  }
}

/* 2) Reset & base */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  font-family:
    'Share Tech Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono',
    monospace;
  color: var(--ink);
  background: var(--bg);
  line-height: 1.45;
  font-size: var(--fs-sm);
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  /* grille décorative */
  background-image:
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size:
    var(--grid-size) var(--grid-size),
    var(--grid-size) var(--grid-size);
  background-position: center center;
}

:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 3px;
  box-shadow: var(--glow);
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}

/* 3) Utilitaires globaux */
.hidden {
  display: none !important;
}
.shadow {
  box-shadow: var(--shadow) !important;
}
.rounded {
  border-radius: var(--r-sm) !important;
}
.border {
  border: 2px solid var(--border) !important;
}

/* 12) Thèmes alternatifs (globaux) */
:root[data-theme='canary'] {
  --accent: #ffd43b;
  --accent-contrast: #111;
  --paper: #f7f6f1;
  --ink: #0f1115;
  --ink-muted: #4b4f57;
}
:root[data-theme='stamp'] {
  --accent: #ef4444;
  --accent-contrast: #fff;
}
:root[data-theme='mint'] {
  --accent: #22c55e;
  --accent-contrast: #0b0d10;
}

.jkc-card {
  background: var(--paper);
  border: 1px solid var(--border);
  padding: var(--pad-card);
  border-radius: var(--r-sm);
  position: relative;
  box-shadow: var(--shadow);
}

.jkc-card[data-stamp]::after {
  content: attr(data-stamp);
  position: absolute;
  top: 10px;
  right: 14px;
  font-family: 'IBM Plex Mono', monospace;
  font-size: var(--fs-xxs);
  color: rgba(26, 79, 139, 0.18);
  transform: rotate(-8deg);
  letter-spacing: 1px;
  pointer-events: none;
}

.jkc-separator {
  border-bottom: 1px dashed var(--ink-muted);
  margin: 20px 0;
  opacity: 0.7;
}

.jkc-placeholder {
  background: var(--paper);
  padding: 32px;
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  max-width: 460px;
  margin: 60px auto;
  text-align: center;
  box-shadow: var(--shadow);
}

.jkc-placeholder .icon {
  font-size: 42px;
  opacity: 0.55;
  margin-bottom: 12px;
}

.jkc-placeholder h2 {
  margin: 8px 0 4px;
  font-size: var(--fs-md);
  font-weight: 600;
}

.jkc-placeholder p {
  color: var(--ink-muted);
  font-size: var(--fs-xs);
  margin-bottom: 20px;
}

.jkc-placeholder .stamp {
  display: inline-block;
  margin-top: 14px;
  font-family: 'IBM Plex Mono';
  font-size: var(--fs-xxs);
  color: rgba(182, 56, 56, 0.4);
  transform: rotate(-6deg);
}

.jkc-grid {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  margin-top: 20px;
}

.jkc-page-title {
  font-size: var(--fs-lg);
  margin-bottom: 4px;
  letter-spacing: -0.5px;
}

.jkc-page-subtitle {
  color: var(--ink-muted);
  margin-bottom: 24px;
  font-size: var(--fs-xs);
}
